(function(x){var y=window.AmazonUIPageJS||window.P,l=y._namespace||y.attributeErrors,e=l?l("DetailPageTwisterViewAsset",""):y;e.guardFatal?e.guardFatal(x)(e,window):e.execute(function(){x(e,window)})})(function(x,y,l){x.when("A","dp-refresh-handler","view-util","twister-string-constants","dp-interactive-page-refresh-handler","twister-dimension-subview-promise-handler").register("page-refresh-view",function(e,H,v,r,z,t){function u(t,w,g){function u(b){return{chunk:function(c){var b=c.ASIN,k=c.Value;
c=c.FeatureName;if(!h.hiddenFeatures[c]){var a=c,f,d;try{a&&k&&k.content&&(d=k.content[a],"undefined"!==typeof d&&(f=n("#"+a),f.html(d),f.removeClass("js-feature-refresh-overlay"),f.css({opacity:""})))}catch(g){a=a||"NoFeatureName",D.logFatal(g,{message:"Error in feature"+a})}h.twisterRefreshHandler.stampFeature(a,b);"twister-slot-price_feature_div"==c&&(b=k?k.content:null,f=n(".swatchSelect .twisterSwatchPrice").html(),k=n(".swatchSelect .price_slot_ppu").html(),f&&b&&b.priceToSet&&(f=e.trim(f),
b.priceToSet!==f&&(n(".swatchSelect .twisterSwatchPrice").html(b.priceToSet),B("twisterUpdatePriceMismatch"))),k&&b&&b.hasPricePerUnit&&b.pricePerUnitDisplay&&(k=e.trim(k),b.pricePerUnitDisplay!==k&&(n(".swatchSelect .price_slot_ppu").html(b.pricePerUnitDisplay),B("twisterUpdatePricePerUnitMismatch"))))}},success:function(b,m,k){B("twisterUpdateSuccess");z.updateRenderTime()},error:function(b,m,k){Twister.$("#variations-overlay").hide();B("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&
(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(b){D.logFatal("Ajax aborted: "+b)},timeout:4E4}}function A(b,c,m,k,a){var f=[];"parent"===b?(c=p(c,k,"parent",a),f.parent=c,c=p(m,k,"partial",a),f.partial=c):(c=p(m,k,b,a),f[b]=c);return f}function q(b,c,m,k,a){for(var f in b)if(b.hasOwnProperty(f)){if("full"===f){var d=m.dimensionType,g=h.twisterUtil.getDimensionInfo().length,p=m.dimensionDisplayType,A=m.newAsin,q=a&&(e.state("dp-twister-csm")||{}).updateCSMPageTypeId;h.twisterRefreshHandler.startMeasurement(A,
d,g,p,q?A:l,q?["is-twister","parentAsin-"+E]:l)}d=b[f].twisterRefreshParams;g=b[f].notifyClientParams;a&&(p=h.config[f].affectedFeatures,n(p).addClass("js-feature-refresh-overlay"),n(p).css({opacity:.5}),h.twisterRefreshHandler.doPageRefresh(null,d,c,k));K(g.asin,g.id,f,a)}}function d(){n.each(w.contextMetaData,function(b,c){var m={};c=c.elementList||[];var k=c.length,a=[];m.click={};m.mouseOver={};for(var f=0;f<k;f++){var d=n("#"+c[f].divToUpdate);a.push("#"+c[f].divToUpdate);d.length&&c[f].customClientFunction&&
(c[f].updateOnHover&&(m.mouseOver[c[f].divToUpdate]=d.attr("customfunctionname")),m.click[c[f].divToUpdate]=d.attr("customfunctionname"))}h.config[b].affectedFeatures=a.join(",");h.config[b].clientFeatures=m})}function K(b,c,m,k){var a="",a=k?r.EVENT_TYPE_CLICK:r.EVENT_TYPE_MOUSEOVER;n.each(h.config[m].clientFeatures[a],function(a,k){try{var m=function(){h.twisterRefreshHandler.stampImageLoad(b)};(function(){var a={};a.P=x;(function(){eval("var P \x3d this.P;");eval("0, "+k)(c,DetailPage.StateController,
m)}).call(a)})()}catch(d){D.logFatal("Client feature - "+a+", threw and exception :- "+d)}})}function p(b,c,m,k){var a={},f={};a.asinList=b;a.id="parent"===m?b:"partial"===k?c:b;a.mType=m;a=L(m,a);m=!1;(k=e.state("pwState"))&&(m=k.isTryState);m&&(a.isTryState=m);a=h.twisterRefreshHandler.createCustomParamsMap({},a);f.asin=b;f.id=c;return{twisterRefreshParams:a,notifyClientParams:f}}function L(b,c){n.each(w.contextMetaData[b].mTypeSpecificURLParams,function(b,k){c[b]=k});return c}function M(b){b=h.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(b.selected_variation_values);
h.twisterUtil.isFullySelected(b)?h.currentPageSelectionState="full":h.currentPageSelectionState="partial"}function N(b){var c={};c.config=b.measurement;c.dimensionDisplayType=b.dimensionsDisplayType;c.storeID=b.storeID;c.productGroupID=b.productGroupID;return c}function O(b){b=b.immutableURLPrefix;var c=null;b&&-1!=b.indexOf("?")&&(b=b.split("?")[1],0<b.length&&(c={},b=b.split("\x26"),e.each(b,function(b){b=b.split("\x3d");c[b[0]]=b[1]})),c.isFlushing=2,c.dpEnvironment=Twister.dpEnvironment);return c}
function F(b,c){var d;"partial"===b&&"partial"===c&&(d="partial");"partial"===b&&"full"===c&&(d="full");"full"===b&&"partial"===c&&(d="parent");"full"===b&&"full"===c&&(d="full");return d}var h=this,E=w.parent_asin,C=y.ue,G="",D=new g("dpTwisterPageRefreshView");this.twisterUtil=t.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};h.viewUtil=new v(t);h.subType;
var B=function(b){C&&C.count&&C.count(b,(C.count(b)||0)+1)};(function(){M(w);d();var b={featureName:h.twisterFeatureName},c=N(w);h.twisterRefreshHandler=new H(b,null,c);b=O(w.twisterUpdateURLInfo);h.twisterRefreshHandler.addParams(b);t.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(b,c){var a={};if(b!==r.METADATA){var a={},d;d=l;if(c)switch(b){case r.VARIATION_CHANGE:d=c.selected().selInfo;break;case r.VARIATION_PEEK:d=c.peek().selInfo}a.selectionInfo=
d;a.dimensionCombination=h.viewUtil.getCurrDimCombId(a.selectionInfo,"_","X");d=h.twisterUtil.isFullySelected(a.dimensionCombination);a.childAsin=h.twisterUtil.getAsinFromSelectionInfo(a.selectionInfo,d);a.newPageSelectionState=d?"full":"partial";a.mTypeForRefresh=F(h.currentPageSelectionState,a.newPageSelectionState);a.newAsin="parent"===a.mTypeForRefresh?E:a.childAsin;a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1;a.twisterCallListParams=A(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,
a.newPageSelectionState);a.optionsForTwisterRefresh=u(c);a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:G,dimensionDisplayType:w.dimensionsDisplayType}}switch(b){case r.VARIATION_CHANGE:h.subType!==r.PRODUCTIZED_VIEW_SUBTYPE&&(q(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),h.currentPageSelectionState=a.newPageSelectionState,h.subType=l);break;case r.METADATA:switch(c.subType){case r.DP_STATE_VIEW_SUBTYPE:G=c.divMetadata.dimDisplayType;break;case r.PRODUCTIZED_VIEW_SUBTYPE:h.subType=
c.subType,a.dimensionCombination=c.newDimCombID,a.childAsin=c.childAsin,a.newAsin=c.newAsin,a.newPageSelectionState=h.twisterUtil.isFullySelected(a.dimensionCombination)?"full":"partial",a.mTypeForRefresh=F(h.currentPageSelectionState,a.newPageSelectionState),a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1,a.twisterCallListParams=A(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState),a.optionsForTwisterRefresh=u(c),a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:c.divMetaData?
c.divMetaData.dimDisplayType:l,dimensionDisplayType:w.dimensionsDisplayType},q(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),h.currentPageSelectionState=a.newPageSelectionState}}}})})()}var n=e.$;t.registerDimensionSubView("page-refresh-view",u);return u});x.when("A").register("twister-common-constants",function(e){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",
BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",
PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",
ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",
ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});"use strict";x.when("A","a-sheet","jQuery","ready").execute(function(e,l,v){e.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var e=v("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),l=e.find("#selected-format"),t=l.offset().left,u=Math.abs(l.width()),l=Math.max(document.documentElement.clientWidth,y.innerWidth||0),u=l-u,n=e.scrollLeft();(t>u||0>=t)&&e.scrollLeft(n+t-l/3)})});x.when("A","view-util",
"twister-string-constants").register("hover-refresh-view",function(e,y,v){var r=e.$;return function(z,t,u){function n(){e.each(t.contextMetaData,function(e,q){var d={};e=e.elementList||[];var l=e.length;d.mouseOver=[];for(var p=0;p<l;p++)e[p].customClientFunction&&e[p].updateOnHover&&d.mouseOver.push(e[p].divToUpdate);g.clientFeatures[q]=d})}function I(l,q){e.each(g.clientFeatures[q][v.EVENT_TYPE_MOUSEOVER],function(d){try{var e=r("#"+d),g;e.length&&(g=e.attr("customfunctionname"),function(){var d=
{};d.P=x;(function(){eval("var P \x3d this.P;");eval("0, "+g)(l,DetailPage.StateController)}).call(d)}())}catch(q){J.logFatal("Client feature - "+feature+", threw and exception :- "+q)}})}function w(e){e=g.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(e.selected_variation_values);g.twisterUtil.isFullySelected(e)?g.currentPageSelectionState="full":g.currentPageSelectionState="partial"}var g=this,J=new u("dpTwisterHoverRefreshView");this.twisterUtil=z.util;this.twisterFeatureName="TwisterHover";
this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};g.viewUtil=new y(z);g.subType=l;(function(){function r(e){e=g.viewUtil.getCurrDimCombId(e,"_","X");var d=g.twisterUtil.isFullySelected(e)?"full":"partial",l,p=g.currentPageSelectionState;"partial"===p&&"partial"===d&&(l="partial");"partial"===p&&"full"===d&&(l="full");"full"===p&&"partial"===d&&(l="parent");"full"===p&&"full"===d&&(l="full");d=[l];"parent"===l&&(d=["parent","partial"]);return{clientFeatureToRefresh:d,
dimensionCombination:e}}w(t);n();z.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(q,d){switch(q){case v.VARIATION_PEEK:var n={};q=d.peek().selInfo;n=r(q);e.each(n.clientFeatureToRefresh,function(d){I(n.dimensionCombination,d)});case v.VARIATION_CHANGE:g.subType!==v.PRODUCTIZED_VIEW_SUBTYPE&&(q=d.selected().selInfo,d=g.viewUtil.getCurrDimCombId(q,"_","X"),g.currentPageSelectionState=g.twisterUtil.isFullySelected(d)?"full":"partial",
g.subType=l);break;case v.METADATA:switch(d.subType){case v.PRODUCTIZED_VIEW_SUBTYPE:g.subType=d.subType,g.currentPageSelectionState=g.twisterUtil.isFullySelected(d.newDimCombID)?"full":"partial"}}}})})()}})});