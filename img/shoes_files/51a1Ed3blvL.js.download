(function(y){var C=window.AmazonUIPageJS||window.P,F=C._namespace||C.attributeErrors,b=F?F("DPTwisterPlusDesktopConfiguratorAssets",""):C;b.guardFatal?b.guardFatal(y)(b,window):b.execute(function(){y(b,window)})})(function(y,C,F){y.when("A","desktop-configurator-view","desktop-configurator-widgets-factory","desktop-configurator-slot-manager","twister-dynamic-style","desktop-configurator-logger","desktop-configurator-dimension-handler","desktop-configurator-side-sheet-view","desktop-configurator-popover-factory",
"twister-js-init-dpx-data","twister-plus-desktop-configurator-mark-render").register("desktop-configurator-view-initialiser",function(b,l,p,m,f,q,t,z,x,h){var v=h?h.inlineTwisterData||{}:{};v.inlineTwisterEnabled&&(q=new q,new l(h,p.Row,m,f,q,t,z,x),!v.shouldDelayRegistrationWithTwisterCore&&b.trigger("desktop-configurator-view-initialized"))});"use strict";y.when("A").register("desktop-configurator-dimension-handler",function(b){function l(b){this.numberOfDimensionsExpandedOnLanding=b.numberOfDimensionsExpanded||
0;this.expandAllDimensions=-1===this.numberOfDimensionsExpandedOnLanding;this.dimensionKeyRowMap={};this.expandedDimensionList=[];this.maxNumberOfDimensionsExpanded=b.maxNumberOfDimensionsExpanded||1}l.prototype={registerDimension:function(b,l){this.dimensionKeyRowMap[b]=l;(this.expandAllDimensions||this.expandedDimensionList.length<this.numberOfDimensionsExpandedOnLanding)&&this.expandedDimensionList.push(b)},init:function(){-1===this.maxNumberOfDimensionsExpanded&&(this.maxNumberOfDimensionsExpanded=
Object.keys(this.dimensionKeyRowMap).length)},expandDimension:function(b){-1===this.expandedDimensionList.indexOf(b)&&this.expandedDimensionList.push(b);if(this.maxNumberOfDimensionsExpanded<this.expandedDimensionList.length)for(var l=0;l<this.expandedDimensionList.length&&(this.expandedDimensionList[l]!==b&&this.dimensionKeyRowMap[this.expandedDimensionList[l]].collapse(),this.maxNumberOfDimensionsExpanded!==this.expandedDimensionList.length);l++);},collapseDimension:function(b){b=this.expandedDimensionList.indexOf(b);
-1!==b&&this.expandedDimensionList.splice(b,1)}};return l});"use strict";y.when("A","desktop-configurator-constants","3p-promise").register("desktop-configurator-view",function(b,l,p){var m=b.$;return function(f,q,t,z,x,h,v,B){function r(){"function"===typeof C.markFeatureInteractive&&C.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"twister-desktopConfigurator"}]})}function a(){if(!D)return 0===f.unselectedDimCount;var c=w();return!!D.util.getAsinFromSelectionInfo(c)}function d(c,
a,d,e,k,b,n,r,w,f,u,A){return{text:c,image:a||"",popoverImage:d||"",name:e,id:u+"_"+e,selected:k,slotHtm:b,showSlot:n,isVisible:r,unavailable:w,defaultSlotUnavailable:W,isCirclularImageSwatch:g.inlineTwisterData&&"CIRCLE"===g.inlineTwisterData.swatchShape,asin:f,pageUrl:A}}function e(c){X[c]||null===G[c]||(c=g.rows[c],c.toggleSwatch&&c.toggleSwatch.removeMisplacedSwatch())}function n(c,a){var d=O.unselectedDimensionPrompt||"",e=f&&f.variationDisplayLabels?f.variationDisplayLabels[c]:"",g=f&&f.variationValues?
f.variationValues[c][a]:"";return{dimKey:c,titleSelectorPrefix:"inline-twister-dim-title-",titleValueSelector:"inline-twister-dim-title-value",mainText:e,subText:-1!==a?g:d.replace("###dimension",e||"")}}function w(){if(!D){var c=[];b.each(g.dimList,function(a){c.push({dimKey:a,val:f.selectedVariationValues?f.selectedVariationValues[a]:-1})});return c}return D.state()}function c(){return b.map(g.dimList,function(c,a){if(!g.isSingletonMap[c])return new p(function(d){k(g.rows[c],c,a);d()})})}function k(c,
e,k){var n=g.inlineTwisterData.slotsEnabledDimensions,r=!!((g.dimList.length===n.length?n[k]:n[0])&&a(e));k=f.variationValues[e];var w=c.getInitialVisibleSwatchList(),u=[];b.each(k,function(c,a){c=d(c,Y[e+"::"+a],Z[e+"::"+a],a,g.initSelectionState[e].val===a,w[a]?w[a].slotHtm:"",r,w[a]&&w[a].isVisible,w[a]&&w[a].unavailable,F,e,M[e]?M[e][c]:null);u.push(c)});g.swatches[e]=u}function u(){b.each(g.rows,function(c){g.isSingletonMap[c.dimKey]||(c.createDisplaySwatches(),g.textSwatchMap[c.dimKey]&&c.toggleSwatch.alignTextSwatches())})}
function A(){function c(a,e,k){var n,w,r,u=a.expanderContent.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)"),h=f.variationValues[e]||[],A=g.inlineTwisterData.inlineVariationsSize,t=-1,l=A,q=[],p=null;-1===A&&(t=parseInt(a.expanderContent.attr("data-swatchCountPerRow"))||u.length,l=t*Q[e]);b.each(u,function(c,g){var b=parseInt(c.getAttribute("data-idxInToggleSwatchList")),u="true"===c.getAttribute("data-initiallySelected"),f="true"===c.getAttribute("data-initiallyUnavailable");
n=c.getAttribute("data-asin");w=b;r=h[b]||"";var m,v,P;m=Y[e+"::"+w];v=Z[e+"::"+w];P=r;f=d(P,m,v,w,u,"",k,!0,f,n,e,M[e]?M[e][P]:null);a.toggleSwatch&&(m=a.toggleSwatch.createSwatch(f,c),f.isVisible=m.isVisible);q.push(f);u&&g>=l&&(G[e]=b);-1!==A&&-1===t&&(c=c.getBoundingClientRect().top,null===p?p=c:c!==p&&(t=g))});-1!==A&&(-1===t&&(t=u.length),Q[e]=Math.ceil(u.length/t));g.inlineVariationsSize[e]=u.length;a.toggleSwatch&&a.toggleSwatch.setNumberOfSwatchesPerRow(t);return q}function k(c,d,e){var n=
!(!c||!a(d)),w=g.rows[d].getInitialVisibleSwatchList();n&&b.each(w,function(a){if(!a.unavailable){var k=B.updateIfCurrentlyActive.bind(B,a.id),k=g.slotManager.get(a.asin,d,g.noOfLoadingIndicator,!1,I,k,e);a.updateSlotNode({showSlot:c,slotHtm:k},!1,d)}})}function u(c,a,d){c={dimIndex:g.dimIndexMap[c],dimValueIndex:a};a=l.DP_STATE_VIEW_SUBTYPE;var e=g.dimensionsMap,k;k=w();for(var b=l.CHAR_UNDERSCORE,n=[],r=0;r<g.dimensionsMap.length;r++){var f=k[r].val;-1===f&&(f=l.CHAR_ASTERISK);n.push(String(f))}k=
b?n.join(b):n;return{divMetadata:c,eventType:d,subType:a,dimensionsMap:e,currDimCombId:k}}var A=w(),h=0,t={},p=g.inlineTwisterData.slotsEnabledDimensions,v=g.inlineTwisterData.popoverSlotsEnabledDimensions;m.each(A,function(c,a){t[a.dimKey]=a;g.dimIndexMap[a.dimKey]=c;g.dimensionsMap[c]=a.dimKey});g.initSelectionState=t;m.each(g.dimList,function(c,a){var d=t[a].val;c=J(a);var d=n(a,d),e=!(!R&&(g.dimList.length===p.length?p[h]:p[0])),b=-1!==S.indexOf(a);g.textSwatchMap[a]=c;c=new q("inline-twister-row-",
d,{showSlot:!1,dimKey:a,inlineTwisterData:g.inlineTwisterData},{handleDimensionExpansion:function(c,d,n){a=c.dimKey;if(n){g.dimensionHandler.expandDimension(a);c=F;n={};T[a]?(n=U(g.swatches[a],d,a,w(),!1,!b,e),g.indexTranslationMap[a]=n,c={swatches:g.swatches[a]}):(k(d,a,e),T[a]=!0);var r=g.rows[a];r.setState(c,n,H,null,!1);K(d,r,a);g.logger.logDimensionExpanded(a);b||(G[a]=null)}else g.dimensionHandler.collapseDimension(a),g.logger.logDimensionCollapsed(a)}},g.logger);g.rows[a]=c;h+=1});0===g.inlineTwisterData.numberOfDimensionsExpanded&&
(r(),aa=!0);h=0;m.each(g.dimList,function(d,k){function n(c,a,d){if(a){var e=parseInt(a.buttonName,10),b=c[e]&&c[e].id?c[e].id:"";k=a.buttonGroupName;c[e]&&c[e].selected&&g.logger.logSelectedSwatchClick();b&&B.exists(b)&&B.hide(b);H=k;c={dimKey:k,val:e};C.newTwisterInteractionStartTime=new Date;g.twister.metaData(u(k,e,l.viewEvents.CLICK));g.twister.dimensionChanged(c);g.logger.logDimensionValueClick();d&&g.logger.logDimValueClickAfterAutoUpdate()}}function r(c,d){var e=d.data,k=d.type;d=d.$currentTarget;
var n=e.id,b=!!a(c),b=L&&b&&N,b=e.showImageInPopOver||b,f=!N,A=[];if(e){if(k===l.viewEvents.MOUSE_ENTER){var t=parseInt(e.name,10);A.push({dimKey:c,val:t});b&&B.show(n,d,e,f)}else b&&B.hide(n),A=w();D&&(g.twister.metaData(u(c,t,k)),g.twister.dimensionPeek(A));H=c}}function A(c,a){var d=parseInt(c.buttonName,10),e=g.swatches[a];(e?e[d]:F)?(E.setUserInteracting(!0),b.delay(function(){n(e,c)},350),g.logger.logSecViewSwatchClick()):y.log("Selected swatch not found on side sheet toggle button click. Value clicked: "+
d+" ; Swatch length: "+g.swatches[a].length,ba.ERROR,ba.ATTRIBUTION)}function t(c,a){g.isSideSheetOpen=a;g.isWindowResizedAfterSideSheetOpen&&!a&&m.each(g.dimList,function(c,a){g.textSwatchMap[a]&&(J(a),(c=g.rows[a])&&c.toggleSwatch&&(c.toggleSwatch.alignTextSwatches(),c.toggleSwatch.alignTextSwatchNodesInLastRow()))});g.isWindowResizedAfterSideSheetOpen=!1}function q(c,a,d){var k=O.desktopConfiguratorAllOptionsString||"",n=g.swatches[c].length,r={dimensionDisplayText:d.mainText,displayValueText:d.subText,
dimKey:c,getSwatchInfo:E.getSwatch.bind(E),destroyPopover:B.destroy,optionsText:k,totalValueCount:n,isTextSwatch:z};g.sideSheet.open(r);var u={swatches:g.swatches[c]};b.delay(function(){var d=U(g.swatches[c],a,c,w(),!0,!1,V);I&&e(c);E.setState(u,d,H,null,!0,!0);g.sideSheet.update(r);X[c]=!0;b.delay(function(){z&&K(a,E,c,!0);z&&E.toggleSwatch&&n<l.TEXT_ALIGNMENT_LIMIT&&E.toggleSwatch.alignTextSwatches(!1,!0)})},1E3);g.isSideSheetOpen=!0;g.isWindowResizedAfterSideSheetOpen=!1;g.logger.logSeeAllLinkClick("Dimension"+
(g.dimIndexMap[c]+1))}function J(c){D&&(g.isWindowResizedAfterSideSheetOpen=!0,g.isSideSheetOpen||K(g.showSlotMap[c],g.rows[c],c,!1))}var z=g.textSwatchMap[k];d=[];var x=!R&&(g.dimList.length===p.length?p[h]:p[0]),N=g.dimList.length===v.length?v[h]:v[0],V=!x,L=x||N,I=-1!==S.indexOf(k),E=g.rows[k];g.showSlotMap[k]=L;Q[k]=g.inlineTwisterData.numOfRowsPerDimension;x=-1!==f.singletonDimensionKeys.indexOf(k);g.isSingletonMap[k]=x;h+=1;!x&&E&&(x=!(!L||!a(k)),G[k]=null,d={name:k,swatches:d,isTextSwatch:z,
onChange:n,onHover:r,hideSlotsFromMainView:V,totalSwatchCount:(f.variationValues[k]||[]).length,preserveNaturalSwatchOrder:I},g.sideSheet.registerToggleButtonGroup(k,A,t),E.initializeComponents(d,L,{showSideSheet:q,handleWindowResize:J}),g.dimensionHandler.registerDimension(k,E),d=c(E,k,x),g.swatches[k]=d)});aa||r()}function J(c){var a=!0;(g.inlineTwisterData.disableImageSwatch===F?0:g.inlineTwisterData.disableImageSwatch)||(a=!g.inlineTwisterData.imageDimensionKeysMap[c]);return a}function U(c,d,
k,n,r,w,u){var f=!(!d||!a(k));d=D.util.getDimAvailability(k,n);var A=-1!==S.indexOf(k),t={},h=0,l=B.updateIfCurrentlyActive,q=-1;m.each(n,function(c,a){a.dimKey===k&&(q=a.val)});-1!==q&&(w&&(t[q]=h),h++);var p=g.rows[k];b.each(d.available,function(a){c[a.index]=c[a.index]||{};var d=c[a.index];d.unavailable=!1;d.selected&&(q=a.index,d.isVisible||(null!==G[k]&&c[G[k]]&&(c[G[k]].isVisible=!1,A&&e(k)),G[k]=a.index),d.isVisible=!0);w&&(d.isVisible=h<g.inlineVariationsSize[k]||d.selected);var n=d.isVisible||
r,m=r?d.id+"_sec":d.id;f&&n?d.slotHtm=g.slotManager.get(a.asin,k,g.noOfLoadingIndicator,r,I,l.bind(B,m),u):(d.slotHtm=d.slotHtm||"",l(m,d.slotHtm));r&&p&&p.toggleSwatch&&(n=p.toggleSwatch.getSwatch(a.index),b.objectIsEmpty(n)&&(t[a.index]=h));w&&q!==a.index&&(t[a.index]=h);d.showSlot=f;d.selected||h++});b.each(d.unavailable,function(a){c[a.index]=c[a.index]||{};var d=c[a.index];d.unavailable=!0;w&&(d.isVisible=h<g.inlineVariationsSize[k]);d.slotHtm=f?W:"";w&&(t[a.index]=h);d.showSlot=f;h++});T[k]=
!0;A&&(t={});return t}function K(c,a,d,e){var k=g.textSwatchMap[d];c&&k&&(!e||g.isSideSheetOpen)&&(g.slotManager.resetMinSlotHeight(d),c=a.toggleSwatch.getSlotNodes(e),E(c,d,e),g.slotManager.updateSlotHeight(d,e))}function E(c,a,d){g.slotManager.resetSlotHeight(a,d);b.each(c,function(c,d){b.each(c,function(c){g.slotManager.setState(c,a,d)})})}function I(c,a){a&&!g.isSideSheetOpen||K(!0,g.rows[c],c,a)}var g=this,D=F;this.isWindowResizedAfterSideSheetOpen=!1;this.data=f;this.noOfLoadingIndicator=1;
this.dimList=f.reorderedDimensionListKeys||[];this.dimensionsMap=[];this.logger=x;this.inlineTwisterData=f?f.inlineTwisterData||{}:{};this.swatches={};this.sideSheet=new v;var G={},O=this.inlineTwisterData&&this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap:{},W='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+(O.defaultSlotUnavailableString||"")+"\x3c/span\x3e",Y=f.imageHashMap||{},Z=f.desktopConfiguratorPopoverImageMap||{},M=f.dimensionPageLoadUrls||
{},Q={},R=!!f.isAssemblyVariationsEnabled;this.rows={};this.dimensionHandler=new h(g.inlineTwisterData);this.isSingletonMap={};this.indexTranslationMap={};this.textSwatchMap={};var H,ba=l.loggingConstants;this.initSelectionState={};B.setVisibleSlotConfig(this.inlineTwisterData&&this.inlineTwisterData.desktopConfiguratorSlotsInPopover?this.inlineTwisterData.desktopConfiguratorSlotsInPopover:[]);this.inlineVariationsSize={};this.dimIndexMap={};this.isSideSheetOpen=!1;this.showSlotMap={};var S=g.inlineTwisterData.dimsWithSwatchReorderingDisabled||
[],X={},T={},aa=!1;(function(){var c=g.logger.createFunctionTimerInstance("desktopConfiguratorInitTime");c.start();A();c.stop()})();b.on("register-desktop-configurator-with-twisterCore",function(a,d){D=a;g.logger.registerTwisterCore(D);g.sideSheet.init(g.logger);a=w();var e=g.inlineTwisterData.slotsEnabledDimensions,k=g.inlineTwisterData.popoverSlotsEnabledDimensions,r={};m.each(a,function(c,a){r[a.dimKey]=a});D.slotsDimSum.addDefaultQueryParameter("showFancyPrice",g.inlineTwisterData.showFancyPrice);
D.slotsDimSum.addDefaultQueryParameter("twisterFlavor",l.DESKTOP_CONFIGURATOR_FLAVOR);g.slotManager=new t(D,z,g.logger,g.inlineTwisterData);g.dimensionHandler.init();var f=0;b.each(g.rows,function(c){if(!g.isSingletonMap[c.dimKey]){c.postInitialize();var a=c.dimKey,d=r[a].val,w=J(a),u=g.dimList.length===k.length?k[f]:k[0],t=!R&&(g.dimList.length===e.length?e[f]:e[0]),A=!t,h=t||u;g.twister=D.registerActive({viewAttribution:"DetailPage",viewName:"DesktopConfiguratorRowView_"+a},{updateView:function(e,
k){var r,f={},u;if("VARIATION_CHANGE"===e){r=k.selected().selectionInfo();m.each(r,function(c,a){f[a.dimKey]=a});u=f[a].val;e=g.swatches[a];e[u]=e[u]||{};e[d]=e[d]||{};e[d].selected=!1;e[u].selected=!0;k=n(a,d);d===u||w||c.setThumbnailImage(e[u].image);d=u;U(e,h,a,r,!1,!1,A);r=n(a,u);u={swatches:e};var t=b.filter(e,function(c){return c.isVisible});e.length===t.length&&(c.hideSideSheetLink(),g.inlineVariationsSize[a]=e.length);c.setExpanderHeaderAriaLabel(k,r);c.setState(u,{},H,r,!1);K(h,c,a)}else"VARIATION_PEEK"===
e&&(r=k.peek().selectionInfo(),m.each(r,function(c,a){f[a.dimKey]=a}),u=f[a].val,r=n(a,u),H===a&&c.title.setState(r),g.sideSheet.activeDimKey===a&&g.sideSheet.updateDimVal(r))}})}f++});p.all(c()).then(function(){u()});b.trigger("desktop-configurator-twisterCore-initialized",g);d.then(function(){b.each(g.rows,function(c){c.activatePageRefresh()})})})}});"use strict";y.when("A").register("desktop-configurator-constants",function(b){return{AJAX_CALL_TIMEOUT:2E4,DIMENSION_VALUE:"DimensionValue###",DISPLAY_VALUE:"DisplayValue###",
SWATCH_DATA:"SwatchData###",DESKTOP_CONFIGURATOR_FLAVOR:"twisterPlusDesktopConfigurator",MAX_DIMENSION_FLAVOUR_CAP:3,POPOVER_DELAY:500,MAX_INLINE_ROWS:7,SIDE_SHEET_ANIMATION_SPEED:300,SIDE_SHEET_PADDING:32,TEXT_SWATCH_MARGIN_RIGHT:6,CONFIGURED_SLOTS:["price","ms3","twisterPrimeWardrobe","twisterAvailability","deliveryPromise"],SIZE_DIMENSION_NAME:"size_name",DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",DEFAULT_SCROLLER_WIDTH:20,BORDER_WIDTH:2,TEXT_ALIGNMENT_LIMIT:400,
ABS_PACK_DESCRIPTION_RENDERED:"absPackDescriptionRendered",DEFAULT_TEXT_SWATCH_SPACING:16,DEFAULT_IMAGE_SWATCH_SPACING:8,REDUCED_IMAGE_SWATCH_SPACING:4,viewEvents:{MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CLICK:"click"},sideSheetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",SEC_VIEW_DIMENSION_VALUE_LIST:" #tp-inline-twister-dim-values-container",DIMENSION_VALUES_LIST:" .dimension-values-list",DIMENSION_VALUES_LIST_ODD_CHILD:" .dimension-values-list \x3e :nth-child(odd)",
DIMENSION_VALUES_LIST_EVEN_CHILD:" .dimension-values-list \x3e :nth-child(even)",LIST_ITEM_CIRCULAR_IMAGE:".dimension-value-list-item-circular-image",CIRCULAR_IMAGE_SWATCH_BUTTON:".circle-image-swatch-button",LIST_ITEM_SQUARE_IMAGE:".dimension-value-list-item-square-image",SQUARE_IMAGE_SWATCH_BUTTON:".image-swatch-button",TEXT_LIST_ITEM:".swatch-list-item-text",TEXT_SWATCH_BUTTON:".text-swatch-button",TEXT_SWATCH_BUTTON_WITH_SLOTS:".text-swatch-button-with-slots",IMAGE_SELECTOR:".swatch-image",SEC_VIEW_TOGGLE_BUTTON_PREFIX:"sec_",
DELAY:200},widgetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",EXPANDER_HEADER_PREFIX:"#inline-twister-expander-header-",DIMENSION_EXPANDER_ICON_PREFIX:"#dimension-expander-icon-",DIMENSION_EXPANDER_ICON_WRAPPER:".dimension-expander-icon-wrapper",EXPANDED_DIMENSION_TEXT_PREFIX:"#inline-twister-expanded-dimension-text-",COLLAPSED_DIMENSION_TEXT_PREFIX:"#inline-twister-collapsed-dimension-text-",AUTO_NOTIFICATION_EXPANDED:"#inline-twister-auto-notification-expanded",AUTO_NOTIFICATION_COLLAPSED:"#inline-twister-auto-notification-collapsed",
IMAGE_THUMBNAIL:".dimension-collapsed-image-thumbnail",SWATCH_NODE_SELECTOR:".inline-twister-swatch",SLOT_NODE_SELECTOR:".dimension-slot-info",TOGGLE_BUTTON_SELECTOR:".a-button-toggle",IMAGE_SELECTOR:".swatch-image",DIMENSION_VALUES_LIST:".dimension-values-list"},classes:{A_COLOR_ATTAINABLE:"a-color-attainable",AOK_HIDDEN:"aok-hidden",DIMENSION_EXPANDER_CONTENT_EXPAND:"dimension-expander-content-expand",ROTATE:"rotate",A_BUTTON_UNAVAILABLE:"a-button-unavailable",A_BUTTON_SELECTED:"a-button-selected",
A_BUTTON_FOCUS:"a-button-focus",ROW_IDENTIFIER_PREFIX:"desktop-configurator-dim-row-"},cssConstants:{BG_COLOR:"background-color",GREEN_BG_COLOR:"#D9EED9",WHITE_BG_COLOR:"white"},loggingConstants:{ATTRIBUTION:"TwisterPlusDesktopConfigurator",ERROR:"ERROR"}}});"use strict";y.when("A").register("desktop-configurator-logger",function(b){function l(){if(!(this instanceof l))return new l;f||(f=this);return f}function p(b){if("undefined"!==typeof C.csa){var f=C.csa("Events",{producerId:"dp-rpcx"}),l=q.count(b)||
0;f("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:b,valueToLog:l},{ent:"all"})}}var m=b.$,f,q=C.ue;l.prototype={registerTwisterCore:function(b){this.twisterCore=b},logCSMDataOnLanding:function(){var b=0,f=0,l=0,h=this.twisterCore.util,v=h.tvm.dimensionInfo,B=this.twisterCore.state().length,r=Object.keys(h.tvm.dimCombinations).length;m.each(v,function(a,d){a=d.dimKey;h.isRequiredDim(a)&&l++;h.isSingletonDim(a)?f++:b++});q&&q.count&&(q.count("dpMobileTwisterDropdownPresent",b),p("dpMobileTwisterDropdownPresent"),
q.count("dpMbileTwisterSingletonDim",f),p("dpMbileTwisterSingletonDim"),q.count("dpMobileTwisterRequiredDim",l),p("dpMobileTwisterRequiredDim"),q.count("dpMobileTwisterDimSize",B),p("dpMobileTwisterDimSize"),q.count("dpMobileTwisterFamilySize",r),p("dpMobileTwisterFamilySize"),q.count("twisterPlus.inlineTwisterGV",1),p("twisterPlus.inlineTwisterGV"))},logCSMTagsOnLanding:function(f){function l(c,a,d){var e=[];if(a===d)e.push(""),c=c[a],b.$.isArray(c)?b.each(c,function(c,a){e.push(c)}):e.push(c);else{var n=
Math.floor((a+d)/2);a=l.call(this,c,a,n);var r=l.call(this,c,n+1,d);b.each(a,function(c,a){b.each(r,function(a,d){e.push(""===c?a:""===a?c:c+":"+a)})})}return e}function q(c){c&&p.push(c)}var h=this,p=[],m=!0,r=!0,a=[0,3,8,25,50,100,1E3,5E3],d=Object.keys(this.twisterCore.util.tvm.dimCombinations).length,e,n;f.dimensionList&&(e="variation_dimension:"+f.dimensionList.length,b.each(f.dimensionList,function(c,a){h.addCSMTag(c)}));for(var w=1;w<a.length;w++)if(d<=a[w]){n="family_size_bucket:"+a[w-1]+
"-"+a[w];break}else w===a.length-1&&(n="family_size_bucket:gt"+a[w]);f.dimensionInfo&&b.each(f.dimensionInfo,function(c,a){c.isSingleton||(m=!1)});a=m?"SingletonFamily":"DesktopConfigurator";f.initDimCombination&&b.each(f.initDimCombination,function(c,a){-1===c.val&&(r=!1)});q(e);q(n);q(a);r&&q("defaultSelection");f=l.call(this,p,0,p.length-1);(function(c){var a=this;b.each(c,function(c,d){c&&a.addCSMTag(c)})}).call(this,f)},createFunctionTimerInstance:function(b){var f=this;return{eventType:b,start:function(){this.startTime=
Date.now()},stop:function(){this.startTime&&f.logCounter(this.eventType,Date.now()-this.startTime)}}},addCSMTag:function(b){C.ue&&C.ue.tag&&C.ue.tag(b)},logCounter:function(b,f){q&&q.count&&(f===F?q.count(b,(q.count(b)||0)+1):q.count(b,f),p(b))},logBottomSheetPageUpdate:function(b){this.logCounter("twisterPlus.inlineTwisterPageUpdate")},logSelectedSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.selectedSwatchClick")},logDimensionValueClick:function(){this.logCounter("dpmobiletwisterclickOndimval")},
logSecViewTotalCount:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewCount."+b)},logSecViewGV:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewGV."+b)},logSecViewClosed:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewClosed."+b)},logDimensionCollapsed:function(b){this.logCounter("twisterPlus.inlineTwister.dimCollapse."+b)},logDimensionExpanded:function(b){this.logCounter("twisterPlus.inlineTwister.dimExpand."+b)},logSecViewSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.secViewSwatchClick")},
logDimExpansionAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimExpansionAfterAutoUpdate")},logDimValueClickAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimValueClickAfterAutoUpdate")},logAvailabilitySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.availabilitySlotRender")},logPPUSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.ppuSlotRender")},logPrimeSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.primeSlotRender")},
logPriceSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.priceSlotRender")},logDeliverySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.deliverySlotRender")},logReviewsSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.reviewsSlotRender")},logSeeAllLinkClick:function(b){this.logCounter("twisterPlus.inlineTwister.seeAllLinkClick."+b)}};return l});"use strict";y.when("A").register("twister-dynamic-style",function(b){function l(b,l){this.name=b;this.styleNode;
this.rules=l||[];this.pendingRefresh}var p=b.$,m={};l.prototype={refresh:function(){var b=p("\x3cdiv /\x3e",{html:"\x26shy;\x3cstyle\x3e"+this.rules.join(" ")+"\x3c/style\x3e"});this.styleNode?(this.styleNode.replaceWith(b),delete this.styleNode,this.styleNode=b):(this.styleNode=b,this.styleNode.appendTo("body"))}};return{addCSSRules:function(b,q){m[b]?m[b].rules=q||[]:m[b]=new l(b,q);m[b].refresh()}}});"use strict";y.when("A","desktop-configurator-constants","desktop-configurator-twister-register").register("desktop-configurator-slot-manager",
function(b,l,p){function m(b,a,d,e){this.twisterCore=b;this.batch={};this.currentBatch;this.maxSlotHeight={};this.minSlotHeight={};this.dynamicStyle=a;this.slotIdentifierMap={};this.logger=d;this.auiPriceSize=e&&e.auiPriceSize?e.auiPriceSize:"m";this.currentlyUnavailableMessage=e&&e.stringTranslationMap?e.stringTranslationMap.currentlyUnavailableMessage:"";this.desktopConfiguratorSlotsInMainView=e&&e.desktopConfiguratorSlotsInMainView?e.desktopConfiguratorSlotsInMainView:[]}function f(r,a,d,e,n){var f=
this.batch,c=this;f[r]=f[r]||[];f[r].push(d);clearTimeout(this.currentBatch);this.currentBatch=setTimeout(function(){var d=b.map(c.batch,function(c,a){return a});c.twisterCore.slotsDimSum.get(d,function(d){var k=c.batch[d.ASIN];k&&(v.each(k,function(c,a){a(d)}),delete c.batch[d.ASIN]);h(c.batch)&&(k=Object.keys(c.maxSlotHeight),b.each(k,function(c){e(c,n&&c===a)}))})},0)}function q(b,a,d,e){d[a]=d[a]||{};d[a].uniqueCount=d[a].uniqueCount||0;var n="inline-twister-dimsum-loading-"+a+"-"+d[a].uniqueCount;
d[a].uniqueCount+=1;return{loadingHtm:'\x3cdiv class\x3d"'+n+(b?" loading-indicator-1":"")+(e?" aok-hidden":"")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',promise:function(a,c){var d=v("."+n+":not(.loading-indicator-in-popover)").parent();d.length&&(d.html(a),c(d))}}}function t(b){return b.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function z(b,a,d){return t(B.default.call(this,b.content.twisterSlotDiv,a,d))}function x(b,a){if(!b||
0===b.length)return a;if(0<b.find(".loading-indicator-1").length)return b[0].scrollHeight;if(0===b.find(".defaultSlotUnavailable").length)return a;b=b[0].scrollHeight;a<b&&(a=b);return a}function h(b){for(var a in b)if(b.hasOwnProperty(a))return!1;return!0}var v=b.$,B={default:function(b,a,d){b=v("\x3cdiv\x3e"+b+"\x3c/div\x3e");var e=b.find(".price_slot_ppu"),n=b.find("#ms3slot"),f=b.find("#twisterAvailability"),c=b.find("#deliveryPromisePrefix"),k=b.find(".variationReviewsSection"),u=d?[]:this.desktopConfiguratorSlotsInMainView,
h=b.find(".twister_swatch_price");f.length&&((h.length||d)&&-1===u.indexOf("twisterAvailability")&&f.parent().addClass("aok-hidden"),f.parent().append("\x3cdiv class\x3d'js-dummy-twister-availability'\x3e\x3c/div\x3e"),f.parent().find(".a-size-medium").removeClass("a-size-medium").addClass("a-size-small"),f.parent().find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-small"),f.parent().find(".a-size-large").removeClass("a-size-large").addClass("a-size-small"),a&&this.logger.logAvailabilitySlotRender());
0<h.length?(-1===u.indexOf("price")&&h.addClass("aok-hidden"),h.addClass("inline-twister-swatch-price"),d=b.find(".a-price"),0<d.length?d[0].dataset&&(d[0].dataset.aSize=this.auiPriceSize):(h.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),h.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),h.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base")),d="a-size-small",
h.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(d),e.length&&(d="twister-plus-inline-twister-ppu a-size-micro",e.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(d),a&&this.logger.logPPUSlotRender()),a&&this.logger.logPriceSlotRender()):(h=b.find("#sndbox-mobile-twister-price"),0<h.length&&a&&this.logger.logPriceSlotRender());n.length&&(n.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small"),
-1===u.indexOf("ms3")&&n.addClass("aok-hidden"),a&&this.logger.logPrimeSlotRender());0<c.length&&(c.removeClass("a-size-small a-color-secondary").addClass("a-color-base"),-1===u.indexOf("deliveryPromise")&&c.parent().addClass("aok-hidden"),c.find("br").remove(),e=c.find("b"),0===e.length&&(e=c.find("span")),e.length&&(n=" "+t(e.text()),e.addClass("aok-hidden"),c.append('\x3cspan style\x3d"font-weight: bold;"\x3e'+n+"\x3c/span\x3e")),a&&this.logger.logDeliverySlotRender());0<k.length&&(k.removeClass("a-spacing-micro a-spacing-top-micro").addClass("a-spacing-none a-spacing-top-none"),
-1===u.indexOf("variationReviews")&&k.addClass("aok-hidden"),a&&this.logger.logReviewsSlotRender());p.executeModifiers(b);return b.html()}};m.prototype={get:function(b,a,d,e,n,h,c){var k=this,u=this.twisterCore.slotsDimSum.get([b]);if(u[b])return z.call(k,u[b].Value,!1,c);var l=q(d,a,k.slotIdentifierMap,c);f.call(this,b,a,function(a){l.promise(z.call(k,a.Value,!0,c),h)},n,e);return l.loadingHtm},setState:function(b,a,d){this.minSlotHeight[a]||(this.minSlotHeight[a]=[]);this.maxSlotHeight[a]||(this.maxSlotHeight[a]=
[]);this.minSlotHeight[a][d]=this.minSlotHeight[a][d]||0;this.minSlotHeight[a][d]=x(b,this.minSlotHeight[a][d]);this.maxSlotHeight[a][d]=this.maxSlotHeight[a][d]||0;var e=this.maxSlotHeight[a];var n=this.maxSlotHeight[a][d];!b||0===b.length||0<b.find(".loading-indicator-1").length||(b=b[0].scrollHeight,n<b&&(n=b));e[d]=n;this.maxSlotHeight[a][d]=this.maxSlotHeight[a][d]>this.minSlotHeight[a][d]?this.maxSlotHeight[a][d]:this.minSlotHeight[a][d]},updateSlotHeight:function(f,a){var d=[],e;b.each(this.maxSlotHeight[f],
function(b,h){a?(d.push("#desktop-configurator-side-sheet #"+f+"dim_list .desktop-configurator-dim-row-"+h+" .dimension-slot-info {height: "+b+"px;}"),e="twister-plus-desktop-configurator-side-sheet-slot-height-"):(d.push("#inline-twister-expander-content-"+f+" .desktop-configurator-dim-row-"+h+" .dimension-slot-info {height: "+b+"px;}"),e="twister-plus-desktop-configurator-slot-height-")});this.dynamicStyle.addCSSRules(e+f,d)},resetMinSlotHeight:function(f){this.minSlotHeight[f]||(this.minSlotHeight[f]=
[]);this.minSlotHeight[f]=b.map(this.minSlotHeight[f],function(){return 0})},resetSlotHeight:function(f,a){this.maxSlotHeight[f]||(this.maxSlotHeight[f]=[]);this.dynamicStyle.addCSSRules((a?"twister-plus-desktop-configurator-side-sheet-slot-height-":"twister-plus-desktop-configurator-slot-height-")+f,[]);this.maxSlotHeight[f]=b.map(this.maxSlotHeight[f],function(){return 0})}};return m});"use strict";y.when("A","desktop-configurator-constants","detail-page-side-sheet").register("desktop-configurator-side-sheet-view",
function(b,l,p){function m(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null;this.updateSideSheetStatus={}}function f(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null}function q(a,d){b.each(a,function(a){var n="desktop-configurator-swatch-hover:"+d+"_sec";try{b.declarative.remove(a,n),b.declarative.create(a,n,{})}catch(f){y.log("Hover event subscribe failed with error: "+
this.name,r.ERROR,r.ATTRIBUTION)}})}function t(a){a=Array.prototype.slice.call(a);var d=v(a[0]).find("input");a=v(a[a.length-1]).find("input");this.keyDownEventHandler=x.bind(this,d,a);document&&document.addEventListener("keydown",this.keyDownEventHandler);b.delay(function(){d&&d.focus()})}function z(){if(this.mainViewDimContainer){var a=this.mainViewDimContainer.parent().find(".tp-side-sheet-link-container a")[0];document&&document.removeEventListener("keydown",this.keyDownEventHandler);a&&a.focus()}}
function x(a,d,e){e.code&&"tab"===e.code.toLowerCase()&&(e.shiftKey?document&&document.activeElement===a[0]&&(e.preventDefault(),d.focus()):document&&document.activeElement===d[0]&&(e.preventDefault(),a.focus()))}function h(a){var d=v("#desktop-configurator-side-sheet-content-header").clone();d.removeClass("aok-hidden");d.find(".dim-name").text(a.dimensionDisplayText+":");d.find(".dim-value").text(a.displayValueText);var e=a.optionsText;e&&d.find(".dim-options").text(e.replace("###options",a.totalValueCount));
return d}var v=b.$,B=l.sideSheetSelectors,r=l.loggingConstants;m.prototype={init:function(a){var d=this,e=v("#twister-plus-inline-twister-container");0!==e.length&&(e=e[0].getBoundingClientRect().width,this.scrollbarWidth=this.getScrollbarWidth(),this.sideSheet=new p({id:"desktop-configurator-side-sheet",shouldRenderHTMLString:!0,animationDuration:l.SIDE_SHEET_ANIMATION_SPEED,width:e+l.SIDE_SHEET_PADDING+d.scrollbarWidth,onAfterHide:function(){a.logSecViewClosed(d.activeDimKey);b.each(d.swatchList,
function(a){var e=parseInt(a.getAttribute("data-idxInToggleSwatchList"),10),e=d.sideSheetData.getSwatchInfo(e);b.declarative.remove(a,"desktop-configurator-swatch-hover:"+d.activeDimKey+"_sec");d.sideSheetData.destroyPopover(e.id+"_sec")});z.call(d);d.updateSideSheetStatus[d.activeDimKey]&&d.updateSideSheetStatus[d.activeDimKey](d.activeDimKey,!1);f.call(d)}}))},open:function(a){this.activeDimKey=a.dimKey;this.sideSheetData=a;var d=v("#inline-twister-row-"+a.dimKey+" #tp-inline-twister-dim-values-container").find(".desktop-configurator-dim-row-0"),
e=v("#side-sheet-loader-container").clone().removeClass("aok-hidden"),f=e.find(".loader-container"),w=e.find("#side-sheet-loader").clone().removeClass("aok-hidden"),c,k,u=l.DEFAULT_TEXT_SWATCH_SPACING;a.isTextSwatch?(c=d.width()-l.BORDER_WIDTH,k=d.height()-l.BORDER_WIDTH):(k=d.find(".swatch-image-container"),u=0<k.closest(".reduced-image-swatch-margin").length,c=k.outerWidth(),k=k.outerHeight(),u=u?l.REDUCED_IMAGE_SWATCH_SPACING:l.DEFAULT_IMAGE_SWATCH_SPACING,w.css({marginLeft:u/2+"px",marginRight:u/
2+"px"}));w.width(c);w.height(k);b.each(d,function(){f.append(w.clone().addClass("side-sheet-loader-1"))});c=f.clone();c.find(".side-sheet-loader-1").removeClass("side-sheet-loader-1").addClass("side-sheet-loader-2");e.append(c);a=h(a);e.prepend(a);e=e[0].outerHTML;this.sideSheet.updateWidth(this.getWidth(d,u));this.sideSheet.open(e)},update:function(a){this.mainViewDimContainer=v("#inline-twister-row-"+a.dimKey+" #tp-inline-twister-dim-values-container");var d=this.mainViewDimContainer.clone(),e=
d.find(B.DIMENSION_VALUES_LIST);e.attr("id",a.dimKey+"dim_list");var b=h(a);d.prepend(b);e.children().slice(1).removeClass("aok-hidden");e.attr("data-a-button-group",'{"name":"sec_'+a.dimKey+'"}');this.sideSheet.updateContent(d[0].outerHTML);a=this.sideSheet.container;this.swatchList=a.find(B.DIMENSION_VALUES_LIST).children().slice(1);q(this.swatchList,this.activeDimKey);this.dimValContainer=a.find(".desktop-configurator-side-sheet-content-header .dim-value");t.call(this,this.swatchList)},close:function(){this.sideSheet.close()},
registerToggleButtonGroup:function(a,d,e){var f=B.SEC_VIEW_TOGGLE_BUTTON_PREFIX+a,h=this;this.updateSideSheetStatus[a]=e;b.on("a:button-group:"+f+":toggle",function(c){h.sideSheet.close();c.selectedButton.buttonGroupName=a;d(c.selectedButton,a)})},updateDimVal:function(a){this.dimValContainer&&this.dimValContainer.length&&this.dimValContainer.text(a.subText)},getScrollbarWidth:function(){if(this.scrollbarWidth)return this.scrollbarWidth;var a=document.body?C.innerWidth-document.body.clientWidth:-1;
0>a&&(a=l.DEFAULT_SCROLLER_WIDTH);return a},getWidth:function(a,d){var e=0;b.each(a,function(a){e+=a.getBoundingClientRect().width+d});return e+l.SIDE_SHEET_PADDING+this.scrollbarWidth}};return m});"use strict";y.when("A","a-popover","desktop-configurator-constants").register("desktop-configurator-popover-factory",function(b,l,p){function m(c){var a=x("\x3cdiv /\x3e"),d=x("\x3cspan /\x3e"),e=c.title,b=c.showImageInPopOver,n=!c.hideSlots;a.addClass("desktop-configurator-popover-content");d.addClass("desktop-configurator-title-block a-size-base a-color-base a-text-bold");
d.text(e);a.append(d);b&&(d=x("\x3cdiv /\x3e"),b=x("\x3cimg /\x3e"),b.attr("src",c.image),b.attr("data-a-image-source",c.image),b.attr("alt",e),d.append(b),a.addClass("visual-dimension"),d.addClass("desktop-configurator-image-block"),a.prepend(d));n&&f(a,c.slotNode);return a}function f(a,d){d="string"===typeof d?d:d.clone();var e=x("\x3cdiv /\x3e");a.find(".desktop-configurator-slot-block").remove();e.addClass("desktop-configurator-slot-block");e.html(d);q(e);a.append(e)}function q(a){var d=a.find(".price_slot_ppu"),
f=a.find("#ms3slot"),h=a.find(".twister_swatch_price"),l=a.find("#twisterAvailability"),r=a.find("#deliveryPromisePrefix"),q=a.find(".variationReviewsSection"),p=a.find(".default-slot-unavailable"),m=a.find(".loading-indicator-1");a=a.find(".twisterPrimeWardrobe");var g={variationReviews:q,price:h,ms3:f,twisterAvailability:l.parent(),deliveryPromise:r.parent(),ppu:d,twisterPrimeWardrobe:a};m.length&&(m.addClass("loading-indicator-in-popover"),0===e.length?m.addClass("aok-hidden"):m.removeClass("aok-hidden"));
b.each(n,function(a){g[a]&&(-1===e.indexOf(a)?g[a].addClass("aok-hidden"):(g[a].removeClass("aok-hidden"),a=w[a+"_styleSlot"],"function"===typeof a&&a.call(this,g)))});p.length&&p.removeClass("a-size-small").addClass("a-size-base")}function t(a,d,e,f){e=m({slotNode:e.slotNode,title:e.title,showImageInPopOver:e.showImageInPopOver,image:e.image,hideSlots:f});d=l.create(d,{name:a,inlineContent:e,closeButton:!1,padding:"none",activate:"none",restoreFocusOnHide:!1});h[a]=d;v[a]||(b.on("a:popover:afterShow:"+
a,function(a){b.delay(function(){x(r.DIMENSION_VALUES_LIST).removeClass("stop-scrolling-dc")})}),v[a]=!0);return d}function z(a,d,e){if(a=h[a])d=m({slotNode:d.slotNode,title:d.title,showImageInPopOver:d.showImageInPopOver,image:d.image,hideSlots:e}),a.update({content:d});return a}var x=b.$,h={},v={},B=p.POPOVER_DELAY,r=p.sideSheetSelectors,a=null,d=null,e=[],n=p.CONFIGURED_SLOTS,w={price_styleSlot:function(a){var d=a.ppu;a=a.price;a.length&&(a.find(".a-size-base").removeClass("a-size-base").addClass("a-size-large"),
d.length&&d.removeClass("a-size-micro").addClass("a-size-small"))},ms3_styleSlot:function(a){a=a.ms3;a.length&&a.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small")},twisterAvailability_styleSlot:function(a){var d=a.twisterAvailability;d.length&&(a=a.ms3,d.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base"),a.length&&a.after(d))},deliveryPromise_styleSlot:function(a){a=a.deliveryPromise;a.length&&a.addClass("a-size-base")}};return{show:function(c,e,f,n){a=
this.exists(c)?z.call(this,c,f,n):t.call(this,c,e,f,n);clearTimeout(d);var h=this;d=b.delay(function(){x(r.DIMENSION_VALUES_LIST).addClass("stop-scrolling-dc");a&&a.show();h.updateIfCurrentlyActive(c,f.slotNode)},B)},exists:function(a){return!!h[a]},hide:function(c){(c=h[c])&&c.hide();a=null;clearTimeout(d)},updateIfCurrentlyActive:function(d,e){a&&a.$container&&a.attributes.name===d&&(d=a.$container.find(".desktop-configurator-popover-content"),f(d,e))},destroy:function(a){h[a]&&l.remove(a);delete h[a];
clearTimeout(d)},setVisibleSlotConfig:function(a){e=a}}});"use strict";y.when("A").register("desktop-configurator-twister-register",function(){var b=[];return{registerModifier:function(l){b.push(l)},executeModifiers:function(l){b.forEach(function(b){b.modify&&"function"===typeof b.modify&&b.modify(l)})}}});"use strict";y.when("A","desktop-configurator-constants").register("desktop-configurator-widgets-factory",function(b,l){var p=b.$,m=l.widgetSelectors,f=l.classes,q=l.cssConstants,t=l.loggingConstants;
l=function(){function f(){var a=p(m.IMAGE_THUMBNAIL).attr("src");return a&&a.length&&(a=a.split("."),2<a.length)?a[a.length-2]:!1}function h(a,d,e,b){b=b&&0<b.length?b:a.find(".a-button");d&&!e?(b.addClass("text-swatch-button-with-slots").removeClass("text-swatch-button"),a.find("hr").show(),a.find("hr").removeClass("aok-hidden")):(b.removeClass("text-swatch-button-with-slots").addClass("text-swatch-button"),a.find("hr").hide(),a.find("hr").addClass("aok-hidden"))}return{alignTextSwatches:function(a,
d,e){var f=0,h,c;b.each(a,function(a){a.domNode&&(a.isVisible||d||e)&&(h=a.domNode.attr("data-idxInToggleSwatchList"),c=e?p("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+h+"]"):a.domNode,a=c.find(".swatch-title-text-display"),a.length&&a[0].style.removeProperty("height"),a=a?a.height():0,f<a&&(f=a))});b.each(a,function(a){a.domNode&&(a.isVisible||d||e)&&(h=a.domNode.attr("data-idxInToggleSwatchList"),c=e?p("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+
h+"]"):a.domNode,c.find(".swatch-title-text-display").height(f))})},createSwatch:function(a,d,e,b,f,c,k){var l=!d.unavailable,q=d.isVisible,m=d.selected,p=d.showSlot,t=d.slotHtm;e="#"+e;if(c.length)return c=c.clone(),c.removeClass("swatch-prototype"),f&&c.addClass("slots-hidden"),c.attr("data-idxInToggleSwatchList",b),b=c.find(e).attr("id",d.id),c.find(e+"-announce").attr("id",d.id+"-announce"),c.find("input").attr({name:d.name,"aria-labelledby":d.id+"-announce"}),c.find("text"===a?".swatch-title-text-display":
"square_image"===a?".swatch-title-text":".swatch-text").text(d.text),l||b.addClass("a-button-unavailable"),m&&b.addClass("a-button-selected"),"text"!==a&&(m=c.find(".swatch-image"),m.addClass("inline-twister-manual-load"),m.attr({"data-a-image-source":d.image||"",id:"inline-twister-image-"+d.name,alt:d.text})),m=c.find(".dimension-slot-info"),m.length&&(m.attr("id","dimension-slot-info-"+d.name),p?l?0<t.length&&m.html(t):m.html(d.defaultSlotUnavailable):c.find("text"===a?".slots-padding":".dimension-slot-info").addClass("aok-hidden"),
"text"===a&&h(c,p,f,b)),k.append(c),q||c.addClass("aok-hidden"),c},getThumbnailImageUrlForPhysicalId:function(a){return a&&a.length&&(a=a.split("."),2<a.length)?(a.splice(-2,1,f()),a.join(".")):!1},updateSlotSectionInTextSwatch:h}}();var z=function(h){function l(a,d,e,b,f,c,k,m){this.id=a.id;this.unavailable=!!a.unavailable;this.selected=!!a.selected;this.showSlot=a.showSlot;this.slotHtm=a.slotHtm;this.isImageSwatch=!d;this.asin=a.asin;this.pageUrl=a.pageUrl;this.hideSlotsFromMainView=f;var q=d?"text":
a.isCirclularImageSwatch?"circular_image":"square_image";this.domNode=m?p(m):h.createSwatch(q,a,e,b,f,c,k);this.isVisible=a.isVisible;this.imageUrl=a.image;this.popoverImage=a.popoverImage;this.isSlotVisible=!0;this.slotNodeIdentifier=d?".slots-padding":".dimension-slot-info";this.title=a.text;this.name=a.name;this.subscribeToHoverEvent(e)}l.prototype={setState:function(a,d,e,b){this.selected=!!a.selected;this.updateAvailablity(a);this.updateSlotNode(a,d,e);this.updateVisibility(a);this.updateSwatchIndexInDomNode(b);
return this},getSlotNode:function(a){this.slotNode||(this.slotNode=this.domNode.find(m.SLOT_NODE_SELECTOR));if(!a)return this.slotNode;a=this.slotNode?this.slotNode.attr("id"):"";return p("#desktop-configurator-side-sheet").find("#"+a)},updateSlotNode:function(a,d,e){this.slotNode||(this.slotNode=this.domNode.find(m.SLOT_NODE_SELECTOR));this.showSlot!==a.showSlot&&((this.showSlot=a.showSlot)?this.domNode.find(this.slotNodeIdentifier).removeClass("aok-hidden"):this.domNode.find(this.slotNodeIdentifier).addClass("aok-hidden"),
this.isImageSwatch||h.updateSlotSectionInTextSwatch(this.domNode,this.showSlot,this.hideSlotsFromMainView));this.slotHtm!==a.slotHtm&&(d&&p("#tp-inline-twister-sec-view-"+e+" #"+this.slotNode.attr("id")).html(a.slotHtm),this.slotNode.html(a.slotHtm),this.slotHtm=a.slotHtm)},updateAvailablity:function(a){this.toggleButton||(this.toggleButton=this.domNode.find(m.TOGGLE_BUTTON_SELECTOR));(this.unavailable=a.unavailable)?this.toggleButton.addClass(f.A_BUTTON_UNAVAILABLE):this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)},
updateSelection:function(){this.toggleButton||(this.toggleButton=this.domNode.find(m.TOGGLE_BUTTON_SELECTOR));this.selected?(this.toggleButton.addClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)):(this.toggleButton.removeClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_FOCUS))},updateVisibility:function(a){a.isVisible?this.domNode.removeClass(f.AOK_HIDDEN):this.domNode.addClass(f.AOK_HIDDEN);this.isVisible=a.isVisible},subscribeToHoverEvent:function(a){a=
"desktop-configurator-swatch-hover:"+a;try{b.declarative.remove(this.domNode,a),b.declarative.create(this.domNode,a,{})}catch(d){y.log("Hover event subscribe failed with error: "+this.name,t.ERROR,t.ATTRIBUTION)}},updateSwatchIndexInDomNode:function(a){this.domNode&&this.domNode.attr("data-idxInToggleSwatchList",a)},getTopPosition:function(){var a=this.domNode.position();return this.topPosition=a?a.top:0}};return l}(l),x=function(h,l){function a(a,e,f,h){var c=this;this.isTextSwatch=a.isTextSwatch;
this.name=a.name;this.domNode=p(m.EXPANDER_CONTENT_PREFIX+a.name);this.title=h;this.selectedSwatch=null;this.swatches={};this.orderedSwatchList=[];this.initialVisibleSwatchList={};this.swatchIdxOrder=[];this.isPageRefreshActive=!1;this.totalSwatchCount=a.totalSwatchCount||0;this.onChange=a.onChange;this.hoverHandler=a.onHover;this.isUserInteracting=!1;this.autoNotificationCallback=e.autoNotificationCallback;this.rowContainer=f;this.swatchListContainer=this.domNode.find(m.DIMENSION_VALUES_LIST);this.markAutoUpdated=
!1;this.hideSlotsFromMainView=a.hideSlotsFromMainView;this.windowResizeCallback=e.windowResizeCallback;this.preserveNaturalSwatchOrder=a.preserveNaturalSwatchOrder;this.displaySwatches=[];this.numberOfSwatchesPerRow=0;this.swatchPrototypeNode=p("#"+a.name).closest(m.SWATCH_NODE_SELECTOR);this.swatchPrototypeNodeParent=this.swatchPrototypeNode.parent();b.on("a:button-group:"+this.name+":toggle",function(a){var d=parseInt(a.selectedButton.buttonName,10),e=c.swatches[d];e?c.isPageRefreshActive?(c.isUserInteracting=
!0,d=e.unavailable,e.updateSelection(),c.autoNotificationCallback&&c.autoNotificationCallback(d,!0),c.onChange&&c.onChange(c.swatches,a.selectedButton,c.markAutoUpdated),c.setAutoUpdated(!1)):e.pageUrl&&(C.location.href=e.pageUrl):(a="Selected swatch not found on toggle button click. Value clicked: "+d+" ; Swatch length: "+Object.keys(c.swatches).length,y.log(a,t.ERROR,t.ATTRIBUTION))});this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name);this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+
a.name+"_sec",!0);if(this.isTextSwatch)b.on("resize",function(){0<c.displaySwatches.length&&(c.repopulateDisplaySwatches(),c.alignTextSwatches(),c.alignTextSwatchNodesInLastRow(),"function"===typeof c.windowResizeCallback&&c.windowResizeCallback(c.name))})}a.prototype={setState:function(a,e,f,h){var c=this,k,m=[],q=[],p=[];b.objectIsEmpty(e)||(b.each(e,function(e,b){if(!c.swatches[b]&&(a.swatches[b].isVisible||f)){var h=new l(a.swatches[b],c.isTextSwatch,c.name,b,c.hideSlotsFromMainView,c.swatchPrototypeNode,
c.swatchPrototypeNodeParent);h.subscribeToHoverEvent(c.name);c.swatches[b]=h;!c.isTextSwatch&&c.swatches[b]&&c.swatches[b].domNode&&p.push(c.swatches[b].domNode.find(".inline-twister-manual-load")[0])}q[e]=b}),this.swatchIdxOrder=q,h||(this.resetToggleSwatchContainer(),this.displaySwatches=[]),b.each(this.swatchIdxOrder,function(a,d){if(a=c.swatches[a])a&&c.swatchListContainer.append(a.domNode),a&&a.subscribeToHoverEvent(c.name),c.addToDisplaySwatches(a,c.displaySwatches)}));b.each(a.swatches,function(a,
d){if(c.swatches[d])k=a.selected?c.swatches[d]:k,c.swatches[d].selected=!!a.selected,m.push({index:d,data:a});else{if(a.isVisible||f)c.swatches[d]=new l(a,c.isTextSwatch,c.name,d,c.hideSlotsFromMainView,c.swatchPrototypeNode,c.swatchPrototypeNodeParent),c.swatches[d].subscribeToHoverEvent(c.name),c.addToDisplaySwatches(c.swatches[d],c.displaySwatches),!c.isTextSwatch&&c.swatches[d]&&c.swatches[d].domNode&&p.push(c.swatches[d].domNode.find(".inline-twister-manual-load")[0]);a.selected&&(k=c.swatches[d])}});
this.selectedSwatch&&this.selectedSwatch.updateSelection();k&&k.updateSelection();b.each(m,function(a,d){c.swatches[a.index].setState(a.data,f,c.name,a.index)});this.isTextSwatch&&(b.objectIsEmpty(e)?this.alignTextSwatchNodesInLastRow():this.alignTextSwatches());c.selectedSwatch&&k&&c.selectedSwatch!==k&&!c.isUserInteracting&&c.autoNotificationCallback(!0);c.selectedSwatch=k;c.isUserInteracting=!1;p.length&&b.loadImageManually(p);return this},getSlotNodes:function(a){return b.map(this.displaySwatches,
function(e){return b.map(e,function(e){return e.getSlotNode(a)})})},setUserInteracting:function(a){this.isUserInteracting=a},alignTextSwatches:function(a,e){b.each(this.displaySwatches,function(b){h.alignTextSwatches(b,a,e)})},alignTextSwatchNodesInLastRow:function(){var a=this.domNode.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)");if(1<a.length){var e=a[a.length-1],f=a[a.length-2];e&&f&&e.getBoundingClientRect().top===f.getBoundingClientRect().top&&(a=b.map(a.slice(a.length-
(a.length%this.numberOfSwatchesPerRow||this.numberOfSwatchesPerRow),a.length),function(a){return this.swatches[a.getAttribute("data-idxInToggleSwatchList")]},this),h.alignTextSwatches(a))}},resetToggleSwatchContainer:function(){var a=p(this.domNode.find(".a-button-list").children()[0]);this.swatchListContainer.html("");this.swatchListContainer.append(a)},getVisibleSwatchesSize:function(){var a=0;b.each(this.swatches,function(e,b){e.isVisible&&(a+=1)});return a},setAutoUpdated:function(a){this.markAutoUpdated=
a},getInitialVisibleSwatchList:function(){return this.initialVisibleSwatchList},getNumberOfSwatchesPerRow:function(){return this.numberOfSwatchesPerRow},setNumberOfSwatchesPerRow:function(a){a&&(this.numberOfSwatchesPerRow=a)},createSwatch:function(a,e){e=new l(a,this.isTextSwatch,this.name,a.name,this.hideSlotsFromMainView,this.swatchPrototypeNode,this.swatchPrototypeNodeParent,e);this.swatches[a.name]=e;this.initialVisibleSwatchList[a.name]=e;this.selectedSwatch=a.selected?e:this.selectedSwatch;
this.orderedSwatchList.push(e);return e},activatePageRefresh:function(){this.isPageRefreshActive=!0;this.domNode.find(".page-load-link").remove()},getSwatch:function(a){return this.swatches[a]?this.swatches[a]:{}},registerHoverDeclarative:function(a,e){var f=this;b.declarative(a,"mouseenter mouseleave",function(a){var c=a.$currentTarget[0].getAttribute("data-idxInToggleSwatchList"),c=f.getSwatch(c);a.data={slotNode:a.$currentTarget.find(c.slotNodeIdentifier),showImageInPopOver:c.isImageSwatch&&!!c.popoverImage,
unavailable:c.unavailable,showSlot:c.showSlot,selected:c.selected,title:c.title,name:c.name,id:e?c.id+"_sec":c.id,image:c.popoverImage};f.hoverHandler(f.name,a)})},addToDisplaySwatches:function(a,e){var b=f.ROW_IDENTIFIER_PREFIX;if(0===e.length)e.push([a]);else{var h=e[e.length-1];h&&h.length===this.numberOfSwatchesPerRow?e.push([a]):h.push(a)}this.removeSwatchRowIdentifier(a);a.domNode&&a.domNode.addClass(b+(e.length-1).toString())},repopulateDisplaySwatches:function(){if(0!==this.displaySwatches.length){var a=
[],e=0,h,l=this;b.each(this.displaySwatches,function(c,k){b.each(c,function(c,b){0===a.length?a.push([c]):0===e?(h=a[0][a[0].length-1],c.getTopPosition()!==h.getTopPosition()?(e=a[0].length,l.numberOfSwatchesPerRow=e,l.addToDisplaySwatches(c,a)):(a[0].push(c),l.removeSwatchRowIdentifier(c),c.domNode&&c.domNode.addClass(f.ROW_IDENTIFIER_PREFIX+(0).toString()))):l.addToDisplaySwatches(c,a)})});0===e&&(this.numberOfSwatchesPerRow=e=a[0].length);this.displaySwatches=a}},removeSwatchRowIdentifier:function(a){a.domNode&&
a.domNode.removeClass(function(a,d){return(d.match(/(^|\s)desktop-configurator-dim-row-\S+/g)||[]).join(" ")})},createDisplaySwatches:function(){var a=this;b.each(this.orderedSwatchList,function(e){a.addToDisplaySwatches(e,a.displaySwatches)})},removeMisplacedSwatch:function(){var a=this.displaySwatches[this.displaySwatches.length-1],e=a[a.length-1],b=e.name;e.domNode&&e.domNode.remove();delete this.swatches[b];this.selectedSwatch&&this.selectedSwatch.name===b&&(this.selectedSwatch=null);1<a.length?
a.pop():this.displaySwatches.pop()},removeInitiallyHiddenSwatches:function(){for(var a=this.domNode.find(".inline-twister-swatch.aok-hidden:not(.swatch-prototype)"),e=a.length-1;0<=e;e--){var b=a[e];b.parentNode.removeChild(b)}}};return a}(l,z),h=function(f){function h(a){this.mainText=a.mainText;this.subText=a.subText;this.dimKey=a.dimKey;this.titleSelectorPrefix=a.titleSelectorPrefix;this.titleValueSelector=a.titleValueSelector;this.domNode=p("#"+this.titleSelectorPrefix+this.dimKey)}h.prototype=
{refresh:function(){this.domNode.find("."+this.titleValueSelector).text(this.subText);this.domNode.removeClass("twister-plus-inline-twister-dim-required twister-plus-inline-twister-dim-required-delay")},setState:function(a){return b.equals(a,p.extend({},this))?this:(p.extend(this,a),this.refresh())},getData:function(){return{mainText:this.mainText,subText:this.subText}}};return h}(l),v=function(h,l,a){function d(a,d,h,c,k){function t(){x=x||v.domNode.find(".dimension-heading");x.css(q.BG_COLOR,q.GREEN_BG_COLOR);
b.delay(function(){b.animate(x,{"background-color":q.WHITE_BG_COLOR},200)},1E3)}var v=this;this.disableCollapseFunctionality=h.inlineTwisterData?h.inlineTwisterData.disableCollapseFunctionality:!1;this.stringTranslationMap=h.inlineTwisterData?h.inlineTwisterData.stringTranslationMap:{};this.title=d?new l(d):null;this.dimKey=h.dimKey;this.domNode=p("#"+a+this.dimKey);this.showSlot=h.showSlot;this.logger=k;this.isTwisterCoreInitialized=this.markAutoUpdated=!1;this.expanderContent=v.domNode.find(m.EXPANDER_CONTENT_PREFIX+
this.dimKey);this.expanderHeader=v.domNode.find(m.EXPANDER_HEADER_PREFIX+this.dimKey);this.icon=v.domNode.find(m.DIMENSION_EXPANDER_ICON_PREFIX+this.dimKey);this.expandedText=v.domNode.find(m.EXPANDED_DIMENSION_TEXT_PREFIX+this.dimKey);this.collapsedText=v.domNode.find(m.COLLAPSED_DIMENSION_TEXT_PREFIX+this.dimKey);this.rowCallbacks=c;this.autoNotificationExpanded=v.domNode.find(m.AUTO_NOTIFICATION_EXPANDED);this.autoNotificationExpandedText=v.autoNotificationExpanded.text();this.imageThumbnail=v.domNode.find(m.IMAGE_THUMBNAIL);
this.sideSheetLink=this.domNode.find(".tp-side-sheet-link-container");this.isExpanded=this.expanderContent.hasClass("dimension-expander-content-expand");var x;this.autoNotificationCallback=function(a,c){var e=v.autoNotificationExpandedText;a?v.isExpanded&&c?(v.autoNotificationExpanded.find("."+f.A_COLOR_ATTAINABLE).html(e),v.autoNotificationExpanded.removeClass(f.AOK_HIDDEN)):(t(),v.setAutoUpdated(!0)):v.hideAutoNotification()};this.disableCollapseFunctionality||b.declarative("toggle-dimension-expander-"+
this.dimKey,"click",function(a){v.isExpanded?v.collapse():v.expand();v.hideAutoNotification()})}d.prototype={setState:function(a,d,b,c,h,l){this.toggleSwatch&&b!==this.dimKey&&this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);a&&this.toggleSwatch&&this.toggleSwatch.setState(a,d,h,l);h||c&&this.title&&this.title.setState(c)},expand:function(){this.expanderContent&&this.expanderContent.css("visibility","");this.expanderContent&&this.expanderContent.addClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.icon&&
this.icon.addClass(f.ROTATE);this.expandedText&&this.expandedText.removeClass(f.AOK_HIDDEN);this.collapsedText&&this.collapsedText.addClass(f.AOK_HIDDEN);this.imageThumbnail.addClass(f.AOK_HIDDEN);this.isExpanded=!0;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:
"",d=this.title.getData(),a=a.replace("###dimension",d.mainText).replace("###value",d.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToCollapse:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(m.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}this.markAutoUpdated&&(this.logger.logDimExpansionAfterAutoUpdate(),this.markAutoUpdated=!1)},collapse:function(){this.expanderContent&&this.expanderContent.removeClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);
this.expanderContent&&this.expanderContent.css("visibility","hidden");this.icon&&this.icon.removeClass(f.ROTATE);this.expandedText&&this.expandedText.addClass(f.AOK_HIDDEN);this.collapsedText&&this.collapsedText.removeClass(f.AOK_HIDDEN);this.imageThumbnail.removeClass(f.AOK_HIDDEN);this.isExpanded=!1;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!1);this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);
if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",d=this.title.getData(),a=a.replace("###dimension",d.mainText).replace("###value",d.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToExpand:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(m.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}},setUserInteracting:function(a){this.toggleSwatch&&this.toggleSwatch.setUserInteracting(a)},setExpanderHeaderAriaLabel:function(a,
d){a=this.expanderHeader.attr("aria-label").replace(a.subText,d.subText);this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(m.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)},setThumbnailImage:function(a){(a=h.getThumbnailImageUrlForPhysicalId(a))&&this.imageThumbnail.attr("src",a)},setAutoUpdated:function(a){this.markAutoUpdated=a;this.toggleSwatch&&this.toggleSwatch.setAutoUpdated(a)},getInitialVisibleSwatchList:function(){return this.toggleSwatch?this.toggleSwatch.getInitialVisibleSwatchList():
{}},getSwatch:function(a){return this.toggleSwatch?this.toggleSwatch.getSwatch(a):{}},activatePageRefresh:function(){this.toggleSwatch&&this.toggleSwatch.activatePageRefresh()},showSideSheetLink:function(){this.sideSheetLink.removeClass("aok-hidden")},hideSideSheetLink:function(){this.sideSheetLink.addClass("aok-hidden")},setMaxHeight:function(a){this.expanderContent.css("max-height",a)},triggerExpandOrCollapseAnimation:function(a,d,b){var c=this;this.expanderContent.animate({"max-height":a+"px"},
d,function(){c.setMaxHeight("");b&&b()})},getDisplaySwatches:function(){return this.toggleSwatch?this.toggleSwatch.displaySwatches:[]},createDisplaySwatches:function(){this.toggleSwatch&&this.toggleSwatch.createDisplaySwatches()},hideAutoNotification:function(){this.autoNotificationExpanded.addClass(f.AOK_HIDDEN)},initializeComponents:function(d,f,h){if(!this.toggleSwatch&&d){var c=this.title.getData();this.toggleSwatch=new a(d,{windowResizeCallback:h.handleWindowResize,autoNotificationCallback:this.autoNotificationCallback},
this.domNode,c.mainText)}this.isTextSwatch=d?d.isTextSwatch:!0;this.rowCallbacks=b.extend(this.rowCallbacks,h);this.totalSwatchCount=d?d.totalSwatchCount:0;this.showSlot=f;var k=this;b.declarative("open-desktop-configurator-side-sheet:"+this.dimKey,"click",function(){"function"===typeof k.rowCallbacks.showSideSheet&&k.isTwisterCoreInitialized&&(k.rowCallbacks.showSideSheet(k.dimKey,k.showSlot,k.title.getData()),k.hideAutoNotification())})},postInitialize:function(){this.isTwisterCoreInitialized=!0;
var a={dimKey:this.dimKey};this.toggleSwatch&&this.toggleSwatch.removeInitiallyHiddenSwatches();this.isExpanded&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0)}};return d}(l,h,x);return{Swatch:z,ToggleSwatch:x,Title:h,Row:v,utils:l}});"use strict";y.when("A","detail-page-side-sheet-handlers").register("detail-page-side-sheet",function(b,l){function p(b){var m=b.id&&"string"===typeof b.id,q=1===z("#"+b.id).length;if(m&&q)this.id=b.id,this.shouldRenderHTMLString=!!b.shouldRenderHTMLString,
this.animationDuration=b.animationDuration||300,this.container=l.getContainer(b.id),this.onBeforeShow=b.onBeforeShow,this.onAfterHide=b.onAfterHide,m=b.width||580,(q=this.container)&&q.width(m),t(b.id,m),f.call(this);else throw b="Side sheet initialisation failed: "+(m?"Side sheet not present in DOM, or multiple instances of side sheet ID "+b.id+" exist":"Invalid Side sheet ID"),y.log(b,"ERROR","DetailPageSideSheet"),b;}function m(b){var f=this.container;b=this.shouldRenderHTMLString?z(b):z(b).clone();
f.html(b);b.css("display","block");f.removeClass("aok-hidden")}function f(){var f=this;b.declarative("close-detail-page-side-sheet:"+this.id,"click",function(){f.close()});b.declarative("open-detail-page-side-sheet:"+this.id,"click",function(b){f.open(b&&b.data?b.data.content:null)})}function q(b){b.code&&"escape"===b.code.toLowerCase()&&(this.close(),document&&document.removeEventListener("keydown",x))}function t(b,f){b=z("#"+b+"-background .close-button");b.length&&(b[0].style.marginRight=f+10+
"px")}var z=b.$,x=null;p.prototype={open:function(b){if(b&&"string"===typeof b){m.call(this,b);if(this.onBeforeShow)this.onBeforeShow();l.showSideSheet(this.id,this.animationDuration);x=q.bind(this);document&&document.addEventListener("keydown",x)}else y.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")},close:function(){l.closeSideSheet(this.id,this.animationDuration);l.resetSideSheetContainer(this.container);if(this.onAfterHide)this.onAfterHide()},updateWidth:function(b){var f=
this.container;f&&f.width(b);t(this.id,b)},updateContent:function(b){b&&"string"===typeof b?m.call(this,b):y.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")}};return p});"use strict";y.when("A").register("detail-page-side-sheet-handlers",function(b){function l(b,l){f("#"+b+" .detail-page-side-sheet-content").show(function(){m({right:"0px"},b,l)})}function p(b,l){f("#"+b+" .detail-page-side-sheet-content").show(function(){m({right:"-600px"},b,l)})}function m(l,
m,p){b.animate(f("#"+m+" .detail-page-side-sheet-content"),l,p)}var f=b.$;return{showSideSheet:function(b,m){f("body").css("overflow","hidden");f(".detail-page-side-sheet-darken-bg").removeClass("aok-hidden");f("#"+b).removeClass("aok-hidden");l(b,m)},closeSideSheet:function(b,l){p(b,l);f(".detail-page-side-sheet-darken-bg").addClass("aok-hidden");f("#"+b).addClass("aok-hidden");f("body").css("overflow","scroll")},getContainer:function(b){return f("#"+b).find(".detail-page-side-sheet-content")},resetSideSheetContainer:function(b){b.html("")}}})});